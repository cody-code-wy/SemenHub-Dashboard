Order Items
<table>
  <thead>
    <tr>
      <th>SKU ID</th>
      <th>Animal name</th>
      <th>Semen Count</th>
      <th>Semen Type</th>
      <th>Storage Facility</th>
      <th>price per unit</th>
      <th>Order Quantity</th>
      <th>Cost</th>
    </tr>
  </thead>
  <tbody>
    <% @purchase.inventory_transactions.each do |trans| %>
      <tr>
        <td><%= trans.sku.id %></td>
        <td><%= trans.sku.animal.name %></td>
        <td><%= trans.sku.semen_count %></td>
        <td><%= trans.sku.semen_type %></td>
        <td><%= trans.sku.storagefacility.name %></td>
        <td><%= trans.sku.price_per_unit %></td>
        <td><%= -trans.quantity %></td>
        <td><%= -trans.quantity * trans.sku.price_per_unit %></td>
      </tr>
    <% end %>
  </tbody>
</table>
Storage Facility Fees and shipping
<table>
  <thead>
    <th>Storage Facility</th>
    <th>Fee Type</th>
    <th>Fee Cost</th>
  </thead>
  <tbody>
    <% @purchase.storagefacilities.uniq.each do |storage| %>
      <% storage.fees.each do |fee| %>
        <tr>
          <td><%= storage.name %></td>
          <td><%= fee.fee_type %></td>
          <td><%= fee.price %></td>
        </tr>
      <% end %>
      <% if @purchase.shipment.id %>
        <% unless @purchase.shipment.address == storage.address %>
          <tr>
            <td><%= storage.name %></td>
            <td>Shipping via <%= storage.shipping_provider %></td>
            <td><%= storage.get_shipping_price(-1 * @purchase.inventory_transactions.where(sku: Sku.where(storagefacility: storage)).sum(:quantity),@purchase.shipment).to_f / 100 %></td>
          </tr>
        <% end %>
      <% end %>
    <% end %>
  </tbody>
</table>

<div class="total">
  Total: <%= @purchase.total %>
</div>
<div>
  <%= render @partial if @partial %>
</div>
